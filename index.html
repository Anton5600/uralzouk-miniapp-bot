<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–Ω—Ü—ã 18+</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div id="loading" class="loading-container">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
        <div id="mainContent" class="hidden">
            <!-- –•–µ–¥–µ—Ä -->
            <header class="header">
                <div class="header-content">
                    <h1 class="logo">üíÉ –®–∫–æ–ª–∞ –¢–∞–Ω—Ü–µ–≤ üï∫</h1>
                    <div class="user-badge" id="userBadge">
                        <span id="userRole"></span>
                    </div>
                </div>
            </header>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <nav class="tabs" id="tabs">
                <button class="tab-btn active" data-tab="profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
                <button class="tab-btn" data-tab="schedule">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</button>
                <button class="tab-btn" data-tab="attendance">–ü–æ—Å–µ—â–µ–Ω–∏—è</button>
                <button class="tab-btn" data-tab="contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
            </nav>

            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
            <main class="main-content">
                <!-- –í–∫–ª–∞–¥–∫–∞ –ü—Ä–æ—Ñ–∏–ª—å -->
                <div id="profileTab" class="tab-content active">
                    <div class="card profile-card">
                        <div class="profile-header">
                            <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                            <div class="balance-badge" id="balanceBadge">
                                <span id="balanceCount">0</span> –∑–∞–Ω—è—Ç–∏–π
                            </div>
                        </div>
                        
                        <div class="profile-info">
                            <div class="info-item">
                                <span class="label">–ò–º—è:</span>
                                <span class="value" id="userName">‚Äî</span>
                            </div>
                            <div class="info-item">
                                <span class="label">–ë–∞–ª–∞–Ω—Å:</span>
                                <span class="value balance-value" id="userBalance">0 –∑–∞–Ω—è—Ç–∏–π</span>
                            </div>
                            <div class="info-item">
                                <span class="label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–ª–∞—Ç–µ–∂:</span>
                                <span class="value" id="lastPayment">‚Äî</span>
                            </div>
                            <div class="info-item">
                                <span class="label">–°—Ç–∞—Ç—É—Å:</span>
                                <span class="value role-badge" id="userRoleBadge">–£—á–µ–Ω–∏–∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                    <div class="quick-actions">
                        <button class="action-btn" onclick="showTab('schedule')">
                            üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                        </button>
                        <button class="action-btn" onclick="showTab('attendance')">
                            üìä –ú–æ–∏ –ø–æ—Å–µ—â–µ–Ω–∏—è
                        </button>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ -->
                <div id="scheduleTab" class="tab-content">
                    <div class="card">
                        <h2>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h2>
                        <div id="scheduleContainer" class="schedule-container">
                            <div class="loading-small">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</div>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –ü–æ—Å–µ—â–µ–Ω–∏—è -->
                <div id="attendanceTab" class="tab-content">
                    <div class="card">
                        <h2>üìä –ú–æ–∏ –ø–æ—Å–µ—â–µ–Ω–∏—è</h2>
                        <div id="attendanceContainer" class="attendance-container">
                            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ—Å–µ—â–µ–Ω–∏—è—Ö...</p>
                        </div>
                    </div>
                </div>

                <!-- –í–∫–ª–∞–¥–∫–∞ –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
                <!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ - —É–¥–∞–ª–∏—Ç—å –ø–æ—Å–ª–µ -->
<div class="card" style="margin-top: 20px; background: #fff3cd;">
    <h3>üîß –û—Ç–ª–∞–¥–∫–∞ API</h3>
    <button onclick="testAPI()" style="background: #856404; color: white; padding: 10px; border: none; border-radius: 5px; margin: 5px;">–¢–µ—Å—Ç getUserData</button>
    <button onclick="testScheduleAPI()" style="background: #856404; color: white; padding: 10px; border: none; border-radius: 5px; margin: 5px;">–¢–µ—Å—Ç getSchedule</button>
    <div id="debugResult" style="margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 5px;"></div>
</div>
                <div id="contactsTab" class="tab-content">
                    <div class="card">
                        <h2>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã —à–∫–æ–ª—ã</h2>
                        <div class="contact-info">
                            <div class="contact-item">
                                <span class="contact-icon">üìç</span>
                                <div class="contact-details">
                                    <strong>–ê–¥—Ä–µ—Å:</strong>
                                    <p>–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –¢–∞–Ω—Ü–µ–≤–∞–ª—å–Ω–∞—è, –¥. 15</p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">üìû</span>
                                <div class="contact-details">
                                    <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong>
                                    <p><a href="tel:+79991234567">+7 (999) 123-45-67</a></p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">‚úâÔ∏è</span>
                                <div class="contact-details">
                                    <strong>Email:</strong>
                                    <p><a href="mailto:dance@school.ru">dance@school.ru</a></p>
                                </div>
                            </div>
                            <div class="contact-item">
                                <span class="contact-icon">üïí</span>
                                <div class="contact-details">
                                    <strong>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã:</strong>
                                    <p>–ü–Ω-–ü—Ç: 9:00-22:00<br>–°–±-–í—Å: 10:00-20:00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
                <div id="adminPanel" class="admin-panel hidden">
                    <div class="card">
                        <h2>üëë –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
                        
                        <div class="admin-section">
                            <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</h3>
                            <form id="addStudentForm" class="admin-form">
                                <input type="text" id="newStudentName" placeholder="–ò–º—è —É—á–µ–Ω–∏–∫–∞" required>
                                <input type="number" id="newStudentTelegramId" placeholder="Telegram ID" required>
                                <input type="text" id="newStudentUsername" placeholder="Username (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
                                <div class="form-row">
                                    <input type="number" id="initialBalance" placeholder="–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å" value="8" required>
                                    <input type="number" id="initialPayment" placeholder="–°—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞" value="3200" required>
                                </div>
                                <button type="submit" class="submit-btn">–î–æ–±–∞–≤–∏—Ç—å —É—á–µ–Ω–∏–∫–∞</button>
                            </form>
                        </div>

                        <div class="admin-section">
                            <h3>‚úÖ –û—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–µ–Ω–∏–µ</h3>
                            <form id="markAttendanceForm" class="admin-form">
                                <div class="form-row">
                                    <select id="levelSelect" class="level-select">
                                        <option value="–ó—É–∫0">–ó—É–∫0</option>
                                        <option value="–ó—É–∫1">–ó—É–∫1</option>
                                        <option value="—Ä–∞—Å—Ö–æ–¥">–†–∞—Å—Ö–æ–¥</option>
                                    </select>
                                    <input type="number" id="attendanceTelegramId" placeholder="Telegram ID —É—á–µ–Ω–∏–∫–∞" required>
                                </div>
                                <button type="submit" class="submit-btn">–û—Ç–º–µ—Ç–∏—Ç—å –ø–æ—Å–µ—â–µ–Ω–∏–µ</button>
                                <div id="attendanceResult" class="result-message"></div>
                            </form>
                        </div>

                        <div class="admin-section">
                            <h3>üìä –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h3>
                            <div class="quick-admin-actions">
                                <button class="admin-action-btn" onclick="showTab('schedule')">
                                    üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
                                </button>
                                <button class="admin-action-btn" onclick="loadAllUsers()">
                                    üë• –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
        <div id="notification" class="notification hidden"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
